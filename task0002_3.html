<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>轮播图</title>
    <link rel="stylesheet" type="text/css" href="css\task0002_3.css">
</head>
<body>
<div id="picDiv">
    <ul id="picUl">
        <li><img src="IMG\1.jpg"></li>
        <li><img src="IMG\2.jpg"></li>
        <li><img src="IMG\3.jpg"></li>
    </ul>
    <div id="spanDiv">
        <span id="span1"></span>
        <span id="span2"></span>
        <span id="span3"></span>
    </div>
</div>
</body>
<script>
var interval;
$("span1").className = "changeBackground";
function $(id) {
    return document.getElementById(id);
}
/*自动轮播*/
function rollPic(){
	
	var ulWidth = $("picDiv").offsetWidth; 
	var nowMargin = $("picUl").offsetLeft;       
	var newMargin = nowMargin-ulWidth/1000;
	if(Math.abs(newMargin)<ulWidth){
		$("span1").className = "";
		$("span3").className = "";
		$("span2").className = "changeBackground";
		$("picUl").style.marginLeft=newMargin+"px";		
	} else if (Math.abs(newMargin)<2*ulWidth){
		$("span1").className = "";
		$("span2").className = "";
		$("span3").className = "changeBackground";
		$("picUl").style.marginLeft=newMargin+"px";		
	} else {
		clearInterval(interval);
	};
}
function init(){	
	interval =  setInterval(rollPic,10);
}
setTimeout(init,5000);
</script>
</html>